<!-- views/pamonitoring.ejs.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Monitoring</title>

    <% include ../partials/head %>

    <script src="/angular/angular.js"></script>
    <script src="/angular-google-chart/ng-google-chart.js"></script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<style>
    #chart_div {
        display: block;
        height: 500px;
        margin-bottom: 30px;
    }
</style>

<script type="text/javascript">
  google.charts.load('current', {packages: ['corechart', 'line']});
  google.charts.setOnLoadCallback(drawAxisTickColors);

  function drawAxisTickColors() {
    var data = new google.visualization.DataTable();
    data.addColumn('number', 'X');
    data.addColumn('number', 'ckp_jezgra');
    //data.addColumn('number', 'test soba_2');

    //data.addRows([[4, 18, 10], [5, 9, 5], [6, 11, 3], [7, 27, 19], [8, 33, 25], [9, 40, 32], [10, 32, 24]]);

    //allSensorData
    var mSensorData = <%- JSON.stringify(mSensorData) %>;
    let arrCnt = mSensorData.length;
    var cnt = 0;
    for (var i = arrCnt-1; i > 0; i--) {
    //for (var i = 0; i < arrCnt; i++) {
      let sVal = parseFloat(mSensorData[i].sensor_value);
      console.log("val["+ i + "] -> " + sVal);
      data.addRow([cnt, sVal]);
      cnt++;
    }

    var options = {
      hAxis: {
        title: 'Time',
        textStyle: {
          color: '#01579b',
          fontSize: 18,
          fontName: 'Arial',
          bold: true,
          italic: true
        },
        titleTextStyle: {
          color: '#01579b',
          fontSize: 18,
          fontName: 'Arial',
          bold: false,
          italic: true
        }
      },
      vAxis: {
        title: 'Oƒçitanja senzora',
        textStyle: {
          color: '#2b3232',
          fontSize: 18,
          bold: false
        },
        titleTextStyle: {
          color: '#2b3232',
          fontSize: 18,
          bold: true
        }
      },
      colors: ['#c54852', '#31925a'],
      backgroundColor: '#f1f1f1'
    };
    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>

<body>
<header>
    <% include ../partials/header %>
</header>

<div class="main_container" style="display: block">
    <div class="row">
        <div class="center">
            <div class="col-md-12">
                <div id="chart_div"></div>
            </div>
        </div>
    </div>
</div>


<footer class="container-fluid text-center">
    <% include ../partials/footer %>
</footer>

</body>
</html>
